# ğŸ¨ Arquitetura TÃ©cnica - HabitMind AI React Native

## ğŸ“Š Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        React Native + Expo App                         â”‚
â”‚                       (iOS, Android, Web)                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                    â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚               â”‚               â”‚
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚  RootNavigator  â”‚ â”‚   App.tsx    â”‚ â”‚  Package.json    â”‚
           â”‚  (Rotas)        â”‚ â”‚ (Bootstrap)  â”‚ â”‚  (DependÃªncias)  â”‚
           â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚           â”‚            â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”  â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”
   â”‚ Auth  â”‚  â”‚ Habits   â”‚  â”‚  User   â”‚
   â”‚ Stack â”‚  â”‚  Stack   â”‚  â”‚ Stack   â”‚
   â””â”€â”€â”€â”€â”¬â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜
        â”‚          â”‚            â”‚
    â”Œâ”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”
    â”‚         Screens (7)            â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚ Auth:       Login, Register     â”‚
    â”‚ Habits:     Dashboard, Create,  â”‚
    â”‚             Detail              â”‚
    â”‚ User:       Profile, Credits    â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Components (ReutilizÃ¡veis)         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚ Button   â”‚  â”‚ Input â”‚  â”‚HabitCard â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚    Store Management (Zustand)         â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  authStore   â”‚   â”‚ habitStore   â”‚ â”‚
    â”‚  â”‚              â”‚   â”‚              â”‚ â”‚
    â”‚  â”‚ - login()    â”‚   â”‚ - getHabits()â”‚ â”‚
    â”‚  â”‚ - register() â”‚   â”‚ - createHabitâ”‚ â”‚
    â”‚  â”‚ - logout()   â”‚   â”‚ - deleteHabitâ”‚ â”‚
    â”‚  â”‚ - user       â”‚   â”‚ - createCheckâ”‚ â”‚
    â”‚  â”‚ - isAuth     â”‚   â”‚ - getStats() â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚     Storage (Persistence)             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ Secure Store (Token)           â”‚   â”‚
    â”‚  â”‚ - accessToken (24h)            â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
    â”‚  â”‚ AsyncStorage (App Data)        â”‚   â”‚
    â”‚  â”‚ - user profile                 â”‚   â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚      Services Layer (API Client)      â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  apiClient (Axios)               â”‚ â”‚
    â”‚  â”‚                                  â”‚ â”‚
    â”‚  â”‚  Request Interceptor:            â”‚ â”‚
    â”‚  â”‚  â””â”€ Adiciona token JWT          â”‚ â”‚
    â”‚  â”‚                                  â”‚ â”‚
    â”‚  â”‚  Response Interceptor:           â”‚ â”‚
    â”‚  â”‚  â””â”€ Trata erro 401 (logout)     â”‚ â”‚
    â”‚  â”‚  â””â”€ Propaga erros               â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  authService                     â”‚ â”‚
    â”‚  â”‚  - login()                       â”‚ â”‚
    â”‚  â”‚  - register()                    â”‚ â”‚
    â”‚  â”‚  - getProfile()                  â”‚ â”‚
    â”‚  â”‚  - getCredits()                  â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â”‚                                       â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
    â”‚  â”‚  habitService                    â”‚ â”‚
    â”‚  â”‚  - CRUD de hÃ¡bitos               â”‚ â”‚
    â”‚  â”‚  - Check-ins                     â”‚ â”‚
    â”‚  â”‚  - EstatÃ­sticas                  â”‚ â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ HTTP REST
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚         Backend NestJS API             â”‚
    â”‚      http://localhost:3000             â”‚
    â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
    â”‚  POST   /auth/register                â”‚
    â”‚  POST   /auth/login                   â”‚
    â”‚  GET    /users/me                     â”‚
    â”‚  PUT    /users/me                     â”‚
    â”‚  GET    /users/credits                â”‚
    â”‚  GET    /habits                       â”‚
    â”‚  POST   /habits                       â”‚
    â”‚  GET    /habits/:id                   â”‚
    â”‚  PUT    /habits/:id                   â”‚
    â”‚  DELETE /habits/:id                   â”‚
    â”‚  POST   /habits/:id/checkins          â”‚
    â”‚  GET    /habits/:id/checkins          â”‚
    â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚       PostgreSQL Database              â”‚
    â”‚   (users, habits, checkins, etc)       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de AutenticaÃ§Ã£o

```
User Login/Register
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   LoginScreen       â”‚
â”‚   RegisterScreen    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ authStore.login()           â”‚
â”‚ authStore.register()        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ authService.login()         â”‚
â”‚ authService.register()      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ apiClient.post()            â”‚
â”‚ POST /auth/login            â”‚
â”‚ POST /auth/register         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Backend Response            â”‚
â”‚ {                           â”‚
â”‚   accessToken: "...",       â”‚
â”‚   user: {...}               â”‚
â”‚ }                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Secure Store                â”‚
â”‚ Salvar: accessToken         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AsyncStorage                â”‚
â”‚ Salvar: user                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ authStore.isAuthenticated   â”‚
â”‚ = true                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
          â”‚
          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ RootNavigator renderiza     â”‚
â”‚ App Tabs (Dashboard)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“± Fluxo de NavegaÃ§Ã£o

```
App Start
   â”‚
   â–¼
RootNavigator
   â”‚
   â”œâ”€ isAuthenticated = false
   â”‚  â”‚
   â”‚  â””â”€â–º AuthStack
   â”‚      â”œâ”€ LoginScreen
   â”‚      â””â”€ RegisterScreen
   â”‚
   â””â”€ isAuthenticated = true
      â”‚
      â””â”€â–º AppTabs (BottomTabNavigator)
          â”‚
          â”œâ”€ HabitsTab (StackNavigator)
          â”‚  â”œâ”€ DashboardScreen
          â”‚  â”œâ”€ HabitDetailScreen
          â”‚  â””â”€ CreateHabitScreen
          â”‚
          â””â”€ UserTab (StackNavigator)
             â”œâ”€ ProfileScreen
             â””â”€ CreditsScreen
```

---

## ğŸ”Œ Fluxo de RequisiÃ§Ã£o HTTP

```
Component
    â”‚
    â–¼
useStore() Hook
(authStore ou habitStore)
    â”‚
    â–¼
Store Action
(login, getHabits, etc)
    â”‚
    â–¼
Service
(authService, habitService)
    â”‚
    â–¼
apiClient.request()
    â”‚
    â”œâ”€â–º Request Interceptor
    â”‚   â””â”€ Adicionar header: Authorization: Bearer <token>
    â”‚
    â–¼
Axios Request
    â”‚
    â–¼
HTTP Method (GET, POST, etc)
    â”‚
    â–¼
Backend (http://localhost:3000)
    â”‚
    â–¼
HTTP Response
    â”‚
    â”œâ”€â–º Response Interceptor
    â”‚   â”œâ”€ Se status = 401
    â”‚   â”‚  â””â”€ Deletar token + logout automÃ¡tico
    â”‚   â””â”€ Se erro
    â”‚      â””â”€ Propagar erro com mensagem
    â”‚
    â–¼
Service retorna dados
    â”‚
    â–¼
Store atualiza estado
    â”‚
    â–¼
Component rerenderiza
    â”‚
    â–¼
UI atualiza
```

---

## ğŸ¯ State Management Flow

```
Component
    â”‚
    â”œâ”€ useAuthStore()
    â”‚  â”‚
    â”‚  â”œâ”€ isAuthenticated: boolean
    â”‚  â”œâ”€ user: User | null
    â”‚  â”œâ”€ isLoading: boolean
    â”‚  â”œâ”€ error: string | null
    â”‚  â”‚
    â”‚  â””â”€ Actions:
    â”‚     â”œâ”€ login(email, password)
    â”‚     â”œâ”€ register(email, name, password)
    â”‚     â”œâ”€ logout()
    â”‚     â”œâ”€ checkAuthStatus()
    â”‚     â””â”€ clearError()
    â”‚
    â””â”€ useHabitStore()
       â”‚
       â”œâ”€ habits: Habit[]
       â”œâ”€ selectedHabit: Habit | null
       â”œâ”€ checkIns: CheckIn[]
       â”œâ”€ isLoading: boolean
       â”œâ”€ error: string | null
       â”‚
       â””â”€ Actions:
          â”œâ”€ getHabits()
          â”œâ”€ getHabit(id)
          â”œâ”€ createHabit(data)
          â”œâ”€ updateHabit(id, data)
          â”œâ”€ deleteHabit(id)
          â”œâ”€ getCheckIns(habitId)
          â”œâ”€ createCheckIn(habitId, data)
          â”œâ”€ clearError()
          â””â”€ reset()
```

---

## ğŸ” Fluxo de SeguranÃ§a

```
User Login
    â”‚
    â–¼
POST /auth/login
    â”‚
    â–¼
Backend verifica credenciais
    â”‚
    â”œâ”€ VÃ¡lidas? Gera JWT
    â””â”€ InvÃ¡lidas? Erro 401
    â”‚
    â–¼
Retorna accessToken
    â”‚
    â–¼
Secure Store
Armazena token criptografado
    â”‚
    â–¼
PrÃ³ximas requisiÃ§Ãµes
    â”‚
    â”œâ”€ Request Interceptor
    â”‚  â””â”€ Recupera token de Secure Store
    â”‚  â””â”€ Adiciona no header
    â”‚
    â”œâ”€ Backend valida token
    â”‚
    â”œâ”€ Token vÃ¡lido? Processa requisiÃ§Ã£o
    â””â”€ Token expirado? Retorna 401
    â”‚
    â”œâ”€ Response Interceptor capta 401
    â”‚  â””â”€ Deleta token
    â”‚  â””â”€ Limpa user data
    â”‚  â””â”€ Faz logout automÃ¡tico
    â”‚  â””â”€ Redireciona para login
    â”‚
    â–¼
App voltou para AuthStack
```

---

## ğŸ“Š Estrutura de Dados

### User
```typescript
interface User {
  id: string;
  email: string;
  name: string;
  planType: 'free' | 'premium';
  createdAt: string;
}
```

### Habit
```typescript
interface Habit {
  id: string;
  userId: string;
  title: string;
  description?: string;
  category: string;
  frequency: 'daily' | 'weekly' | 'custom';
  preferredTime?: string;
  active: boolean;
  createdAt: string;
  updatedAt: string;
}
```

### CheckIn
```typescript
interface CheckIn {
  id: string;
  habitId: string;
  status: 'completed' | 'pending' | 'skipped';
  date: string;
  notes?: string;
  createdAt: string;
}
```

### UserCredits
```typescript
interface UserCredits {
  totalCredits: number;
  dailyLimit: number;
  usedToday: number;
  availableToday: number;
}
```

---

## ğŸ¨ Design System

### Cores
```
Primary:    #6366f1 (Indigo)
Success:    #10b981 (Verde)
Error:      #ef4444 (Vermelho)
Warning:    #f59e0b (Laranja)
Dark:       #1f2937 (Cinza escuro)
Light:      #f9fafb (Cinza claro)
```

### Tipografia
```
Headline:   24px, Weight 700
Title:      16px, Weight 600
Body:       14px, Weight 400
Caption:    12px, Weight 400
```

### EspaÃ§amento
```
xs: 4px
sm: 8px
md: 16px
lg: 24px
xl: 32px
```

---

## ğŸš€ Performance Optimization

```
Component
    â”‚
    â”œâ”€ Lazy Loading
    â”‚  â””â”€ Componentes carregam conforme necessÃ¡rio
    â”‚
    â”œâ”€ Memoization
    â”‚  â””â”€ useMemo() e useCallback()
    â”‚
    â”œâ”€ FlatList
    â”‚  â””â”€ VirtualizedList para listas grandes
    â”‚
    â”œâ”€ Code Splitting
    â”‚  â””â”€ Stack Navigator lazy load
    â”‚
    â””â”€ Zustand
       â””â”€ Minimal re-renders
```

---

**Arquitetura pronta para escalar!** ğŸš€
